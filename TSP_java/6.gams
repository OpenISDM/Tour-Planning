SET
I  first /1*15/
K(I)  depot1 /1*2/
O(I)  node1 /3*15/
alias(I,J);
alias(K,L);
alias(O,P);
TABLE C(I,J)  node to node
                          1                         2                         3                         4                         5                         6                         7                         8                         9                         10                        11                        12                        13                        14                        15                        
1                         99999.0                   99999.0                   42.0119                   38.2753                   40.0125                   44.5533                   43.8292                   32.0156                   22.1359                   24.8395                   53.2353                   54.5619                   48.1041                   35.9026                   45.4533                   
2                         99999.0                   99999.0                   72.0139                   62.1289                   55.1725                   52.8015                   36.7696                   22.8035                   18.6815                   28.6007                   47.1275                   34.0588                   16.1555                   7.2111                    27.2947                   
3                         42.0119                   72.0139                   99999.0                   13.3417                   25.9615                   34.7851                   51.0882                   52.6308                   53.7122                   44.2719                   52.8867                   67.0671                   72.7805                   65.9242                   61.131                    
4                         38.2753                   62.1289                   13.3417                   99999.0                   12.6491                   21.5407                   38.0                      41.2311                   44.6878                   33.6155                   39.5601                   54.0                      61.0328                   55.5698                   48.5077                   
5                         40.0125                   55.1725                   25.9615                   12.6491                   99999.0                   8.9443                    26.3059                   32.8024                   39.6611                   27.0185                   26.9258                   42.19                     51.4296                   48.1664                   37.6431                   
6                         44.5533                   52.8015                   34.7851                   21.5407                   8.9443                    99999.0                   19.6977                   30.0                      39.5601                   26.5707                   18.2483                   34.9285                   46.6154                   45.607                    31.7648                   
7                         43.8292                   36.7696                   51.0882                   38.0                      26.3059                   19.6977                   99999.0                   16.0                      29.2746                   19.2354                   11.0                      16.0                      27.5862                   29.7321                   12.2066                   
8                         32.0156                   22.8035                   52.6308                   41.2311                   32.8024                   30.0                      16.0                      99999.0                   13.6015                   9.0554                    27.0                      22.6274                   20.2237                   15.6205                   13.4536                   
9                         22.1359                   18.6815                   53.7122                   44.6878                   39.6611                   39.5601                   29.2746                   13.6015                   99999.0                   13.0                      40.1995                   35.2278                   26.0                      14.0357                   26.0768                   
10                        24.8395                   28.6007                   44.2719                   33.6155                   27.0185                   26.5707                   19.2354                   9.0554                    13.0                      99999.0                   29.4109                   30.2324                   29.0689                   21.9545                   21.4709                   
11                        53.2353                   47.1275                   52.8867                   39.5601                   26.9258                   18.2483                   11.0                      27.0                      40.1995                   29.4109                   99999.0                   19.4165                   36.0555                   40.2616                   20.5913                   
12                        54.5619                   34.0588                   67.0671                   54.0                      42.19                     34.9285                   16.0                      22.6274                   35.2278                   30.2324                   19.4165                   99999.0                   19.4165                   28.6356                   9.2195                    
13                        48.1041                   16.1555                   72.7805                   61.0328                   51.4296                   46.6154                   27.5862                   20.2237                   26.0                      29.0689                   36.0555                   19.4165                   99999.0                   13.4536                   15.6205                   
14                        35.9026                   7.2111                    65.9242                   55.5698                   48.1664                   45.607                    29.7321                   15.6205                   14.0357                   21.9545                   40.2616                   28.6356                   13.4536                   99999.0                   21.0                      
15                        45.4533                   27.2947                   61.131                    48.5077                   37.6431                   31.7648                   12.2066                   13.4536                   26.0768                   21.4709                   20.5913                   9.2195                    15.6205                   21.0                      99999.0                   
;
SCALAR TOTAL  /15/;
SCALAR NODES  /13/;
SCALAR W  /1/;
SCALAR Y  /15/;
SCALAR M  /1/;
BINARY VARIABLE X(I,J,K)  x variable ;
INTEGER VARIABLE U(K,O)    u variable ;
VARIABLE   Z         objective ;
EQUATIONS
CON1(K)   constraint 1
CON2(K)   constraint 2
CON3   constraint 3
CON4(O)   constraint 4
CON5(O,K)   constraint 5
CON6(O,K)   constraint 6
CON7(K)   constraint 7
CON10(O,P,K)   constraint 10
CON11(O,K)   constraint 11;
CON1(K).. SUM(O,X(K,O,K)) =E= 1;
CON2(K).. SUM(O,X(O,K,K)) =E= 1;
CON3..  SUM((K,L),X(K,L,K)) =E= 0;
CON4(O) .. SUM(K,X(K,O,K)) + SUM((P,K),X(P,O,K)) =e= W;
CON5(O,K) .. X(K,O,K) + SUM(P,X(P,O,K)) =L= 1;
CON6(O,K) .. X(K,O,K) + SUM(P,X(P,O,K)) - X(O,K,K) - SUM(P,X(O,P,K)) =e= 0;
CON7(K) .. Z =G= SUM(O,C(K,O)*X(K,O,K) + C(O,K)*X(O,K,K)) + SUM((P,O),C(P,O)*X(P,O,K));
CON10(O,P,K) .. U(K,O) - U(K,P) + (TOTAL-1)*X(O,P,K) + (TOTAL-3)*X(P,O,K) =L= (TOTAL-2);
CON11(O,K) .. X(O,O,K) =e= 0;
MODEL TRANSPORT /ALL/;
SOLVE TRANSPORT USING MIP MINIMIZING Z ;
